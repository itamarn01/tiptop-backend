<!DOCTYPE html>
<html lang="he" dir="rtl" id="html">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>驻住 驻专 驻 - <%= therapist.name %>
    </title>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #5cb85c;
            --clalit: #009640;
            --maccabi: #0054a6;
            --meuhedet: #ff8300;
            --leumit: #004a99;
            --bg-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        body {
            font-family: 'Assistant', sans-serif;
            background: var(--bg-gradient);
            background-attachment: fixed;
            margin: 0;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 650px;
            margin: 0 auto;
            animation: fadeInUp 0.6s ease-out;
        }

        /* 驻转专 砖驻 */
        .language-header {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .lang-btn {
            background: white;
            border: 2px solid #ddd;
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: bold;
            transition: 0.3s;
        }

        .lang-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* 专住 驻专驻 驻 专 */
        .profile {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .profile img {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--secondary-color);
        }

        .profile-info h2 {
            margin: 0;
            color: #2c3e50;
            font-size: 1.6rem;
        }

        .profile-info .specialization {
            color: var(--primary-color);
            font-weight: 600;
            font-size: 1.1rem;
        }

        .profile-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            border-top: 1px solid #eee;
            padding-top: 15px;
            font-size: 0.95rem;
        }

        .profile-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #555;
        }

        /* 注爪 驻住 */
        form {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .welcome-box {
            background: #f0f7ff;
            padding: 15px;
            border-right: 4px solid var(--primary-color);
            border-radius: 4px;
            margin-bottom: 25px;
            font-size: 1rem;
            line-height: 1.5;
        }

        [dir="ltr"] .welcome-box {
            border-right: none;
            border-left: 4px solid var(--primary-color);
        }

        label {
            display: block;
            margin: 20px 0 8px;
            font-weight: 700;
            color: #444;
        }

        input,
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #eee;
            border-radius: 10px;
            font-size: 1rem;
            font-family: inherit;
            box-sizing: border-box;
        }

        /* 专转 拽驻转  */
        .hmo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
            gap: 12px;
            margin-top: 10px;
        }

        .hmo-option {
            cursor: pointer;
            text-align: center;
        }

        .hmo-option input {
            display: none;
        }

        .hmo-option span {
            display: block;
            padding: 12px 5px;
            border: 2px solid #eee;
            border-radius: 12px;
            font-weight: bold;
            font-size: 0.9rem;
            transition: 0.3s;
        }

        .hmo-clalit input:checked+span {
            border-color: var(--clalit);
            background: var(--clalit);
            color: white;
        }

        .hmo-maccabi input:checked+span {
            border-color: var(--maccabi);
            background: var(--maccabi);
            color: white;
        }

        .hmo-meuhedet input:checked+span {
            border-color: var(--meuhedet);
            background: var(--meuhedet);
            color: white;
        }

        .hmo-leumit input:checked+span {
            border-color: var(--leumit);
            background: var(--leumit);
            color: white;
        }

        .hmo-other input:checked+span {
            border-color: #555;
            background: #555;
            color: white;
        }

        hr {
            border: 0;
            border-top: 1px solid #eee;
            margin: 40px 0 20px;
        }

        button[type="submit"] {
            background: linear-gradient(135deg, var(--primary-color), #357abd);
            color: white;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-top: 30px;
            transition: 0.3s;
        }

        #thankYouMessage {
            background: white;
            padding: 50px;
            border-radius: 20px;
            text-align: center;
            display: none;
        }

        @media (max-width: 500px) {
            .profile-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="language-header">
            <button class="lang-btn" id="btn-he" onclick="setLanguage('he')">注专转</button>
            <button class="lang-btn" id="btn-en" onclick="setLanguage('en')">English</button>
        </div>

        <div class="profile" id="profile-card">
            <div class="profile-header">
                <% if (therapist.logo) { %> <img src="<%= therapist.logo %>" alt="Logo" />
                    <% } %>
                        <div class="profile-info">
                            <h2>
                                <%= therapist.name %>
                            </h2>
                            <div class="specialization">
                                <%= therapist.specialization || therapist.experience %>
                            </div>
                        </div>
            </div>

            <div class="profile-grid">
                <% if (therapist.clinicName) { %>
                    <div class="profile-item"><strong></strong> <span>
                            <%= therapist.clinicName %>
                        </span></div>
                    <% } %>
                        <% if (therapist.address) { %>
                            <div class="profile-item"><strong></strong> <span>
                                    <%= therapist.address %>
                                </span></div>
                            <% } %>
                                <% if (therapist.phone) { %>
                                    <div class="profile-item"><strong></strong> <span>
                                            <%= therapist.phone %>
                                        </span></div>
                                    <% } %>
                                        <% if (therapist.email) { %>
                                            <div class="profile-item"><strong>锔</strong> <span>
                                                    <%= therapist.email %>
                                                </span></div>
                                            <% } %>
            </div>
        </div>

        <form id="clientForm">
            <h1 id="form-title" style="text-align: center;">驻专 驻</h1>

            <% if (therapist.welcomeMessage) { %>
                <div class="welcome-box">
                    <%= therapist.welcomeMessage %>
                </div>
                <% } %>

                    <input type="hidden" name="token" value="<%= token %>">

                    <label id="name-label">砖 驻专: *</label>
                    <input type="text" name="name" required>

                    <label id="lastName-label">砖 砖驻: *</label>
                    <input type="text" name="lastName" required>

                    <label id="birthday-label">转专 : *</label>
                    <input type="date" name="birthday" required>

                    <label id="gender-label"> 驻:</label>
                    <select name="gender">
                        <option value="Male">专 / Male</option>
                        <option value="Female">拽 / Female</option>
                    </select>

                    <label id="idNumber-label">住驻专 转注转 转: *</label>
                    <input type="text" name="idNumber" required placeholder="9 住驻专转">

                    <label id="description-label">转专 住转 驻:</label>
                    <textarea name="description" rows="3" placeholder="住驻专/  拽爪转..."></textarea>

                    <hr>

                    <h3 id="parent-section-title">驻专 专 / 砖 拽砖专</h3>

                    <label id="parentName-label">砖 专:</label>
                    <input type="text" name="parentName">

                    <label id="parentGender-label"> 专:</label>
                    <select name="parentGender">
                        <option value="Male">专 / Male</option>
                        <option value="Female">拽 / Female</option>
                    </select>

                    <label id="phone-label">驻 爪专转 拽砖专: *</label>
                    <input type="text" name="phone" required>

                    <label id="email-label">转转 :</label>
                    <input type="email" name="email">

                    <label id="insurance-label">拽驻转 :</label>
                    <div class="hmo-grid">
                        <label class="hmo-option hmo-clalit"><input type="radio" name="insuranceInfo" value="转"
                                required><span>转</span></label>
                        <label class="hmo-option hmo-maccabi"><input type="radio" name="insuranceInfo"
                                value=""><span></span></label>
                        <label class="hmo-option hmo-meuhedet"><input type="radio" name="insuranceInfo"
                                value="转"><span>转</span></label>
                        <label class="hmo-option hmo-leumit"><input type="radio" name="insuranceInfo"
                                value="转"><span>转</span></label>
                        <label class="hmo-option hmo-other"><input type="radio" name="insuranceInfo"
                                value="专"><span>专</span></label>
                    </div>

                    <button type="submit" id="submit-button">砖转 转</button>
        </form>

        <div id="thankYouMessage">
            <div style="font-size: 60px;"></div>
            <h2 id="thanks-title">驻专 砖 爪!</h2>
            <p id="thanks-msg">转 专, 注 转拽 注专转 砖 驻/转.</p>
        </div>
    </div>

    <script>
        const translations = {
            en: {
                formTitle: "Patient Intake Form",
                name: "First Name: *",
                lastName: "Last Name: *",
                birthday: "Date of Birth: *",
                gender: "Patient Gender:",
                id: "ID Number: *",
                desc: "Description / Reason for Visit:",
                parentTitle: "Parent / Contact Person",
                parentName: "Parent Name:",
                parentGender: "Parent Gender:",
                phone: "Phone Number: *",
                email: "Email Address:",
                insurance: "HMO / Insurance:",
                submit: "Submit Information",
                thanksTitle: "Thank You!",
                thanksMsg: "Your information has been sent successfully."
            },
            he: {
                formTitle: "驻专 驻",
                name: "砖 驻专: *",
                lastName: "砖 砖驻: *",
                birthday: "转专 : *",
                gender: " 驻:",
                id: "住驻专 转注转 转: *",
                desc: "转专 住转 驻:",
                parentTitle: "驻专 专 / 砖 拽砖专",
                parentName: "砖 专:",
                parentGender: " 专:",
                phone: "驻 爪专转 拽砖专: *",
                email: "转转 :",
                insurance: "拽驻转 :",
                submit: "砖转 转",
                thanksTitle: "驻专 砖 爪!",
                thanksMsg: "转 专, 注 转拽 注专转 砖 驻/转."
            }
        };

        function setLanguage(lang) {
            const t = translations[lang];
            const html = document.getElementById("html");
            html.setAttribute("dir", lang === "he" ? "rtl" : "ltr");

            document.getElementById("form-title").textContent = t.formTitle;
            document.getElementById("name-label").textContent = t.name;
            document.getElementById("lastName-label").textContent = t.lastName;
            document.getElementById("birthday-label").textContent = t.birthday;
            document.getElementById("gender-label").textContent = t.gender;
            document.getElementById("idNumber-label").textContent = t.id;
            document.getElementById("description-label").textContent = t.desc;
            document.getElementById("parent-section-title").textContent = t.parentTitle;
            document.getElementById("parentName-label").textContent = t.parentName;
            document.getElementById("parentGender-label").textContent = t.parentGender;
            document.getElementById("phone-label").textContent = t.phone;
            document.getElementById("email-label").textContent = t.email;
            document.getElementById("insurance-label").textContent = t.insurance;
            document.getElementById("submit-button").textContent = t.submit;
            document.getElementById("thanks-title").textContent = t.thanksTitle;
            document.getElementById("thanks-msg").textContent = t.thanksMsg;

            document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('btn-' + lang).classList.add('active');
        }

        document.getElementById("clientForm").addEventListener("submit", async function (e) {
            e.preventDefault();
            const submitBtn = document.getElementById("submit-button");
            submitBtn.disabled = true;
            submitBtn.textContent = "...";

            const formData = new FormData(this);
            const data = Object.fromEntries(formData.entries());
            const token = "<%= token %>";

            try {
                const response = await fetch(`/submit-form/${token}`, {
                    method: "POST",
                    body: JSON.stringify(data),
                    headers: { "Content-Type": "application/json" },
                });

                if (response.ok) {
                    this.style.display = 'none';
                    document.getElementById("profile-card").style.display = 'none';
                    document.getElementById("thankYouMessage").style.display = 'block';
                    window.scrollTo(0, 0);
                } else {
                    throw new Error();
                }
            } catch (error) {
                alert("砖 砖转 驻住.  砖 砖转  .");
                submitBtn.disabled = false;
                submitBtn.textContent = "砖转 转";
            }
        });

        setLanguage('he');
    </script>
</body>

</html>